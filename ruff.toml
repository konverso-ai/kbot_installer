# Ruff configuration file
# Ruff replaces Black, isort, flake8, and many other tools
# Cache directory will be set to a temporary location to avoid cluttering the repository

# Target Python version
target-version = "py313"

# Line length (used by both linter and formatter)
line-length = 88

# Cache configuration - use temporary directory
cache-dir = "/tmp/ruff_cache"

# Formatter configuration (replaces Black)
[format]
# Use double quotes for strings (Black-compatible)
quote-style = "double"
# Indent with spaces
indent-style = "space"
# Skip magic trailing comma
skip-magic-trailing-comma = false
# Line ending style
line-ending = "auto"

# Linting rules - use ALL rules
[lint]
select = ["ALL"]

ignore = [
    "BLE001",    # blind except (justified for download error handling)
    "COM812",    # trailing comma (conflicts with formatter)
    "D203",      # incorrect blank line before class
    "D213",      # multi-line summary second line
    "E501",      # line too long, handled by ruff formatter
    "PLR0913",   # too many arguments (justified for download functions)
    "TRY003",    # avoid long messages in exceptions
]

# Per-file ignores
[lint.per-file-ignores]
"__init__" = [
    "F401", # Imported but unused (common in __init__.py files)
]

"**/*example*.py" = [
    "T201", # print found (acceptable in example files)
]

"**/test_*.py" = [
    "ANN001",    # Missing type annotation for function argument (test parameters)
    "ANN202",    # Missing return type annotation for private function (test helpers)
    "ANN205",    # Missing return type annotation for public method (test methods)
    "ARG002",    # Unused method argument (test parameters)
    "ARG005",    # Unused lambda argument (test mocks)
    #"D102",      # Missing docstring in public method (test methods)
    #"EM101",     # Raw string in exception (test error messages)
    #"F401",      # Imported but unused (test imports)
    #"F811",      # Redefined while unused (test fixtures)
    "F841",      # Local variable is assigned to but never used (test mocks)
    "PLC0415",   # Import should be at the top level (test imports)
    "PLR2004",   # Magic value used in comparison (common in tests)
    "Q000",      # Single quotes found but double quotes preferred (test strings)
    "RUF100",    # Unused noqa directive (test files)
    "S101",      # Use of assert detected (normal in tests)
    "S105",      # Possible hardcoded password (test credentials)
    "S106",      # Possible hardcoded password (test credentials)
    "S108",      # Probable insecure usage of temporary file (test temp files)
    "SIM117",    # Use a single `with` statement with multiple contexts (test mocks)
    "SLF001",    # Private member accessed (common in test mocks)
    "TRY003",    # Avoid specifying long messages outside the exception class (test errors)
    "W292",      # No newline at end of file (test files)
    "W293",      # No newline at end of file (test files)
]

[lint.mccabe]
max-complexity = 10
